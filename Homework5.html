<!DOCTYPE html>
<html>
<title>Explore U.S. Mass Shooting - More guns,more violence?</title>
<meta charset="UTF-8">
	<script type="text/javascript" src="https://d3js.org/d3.v4.min.js"></script>
	<link href= "animate.css" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Anton|Hammersmith+One|PT+Sans+Narrow" rel="stylesheet">
	<style type="text/css">
			#h1 {
				font-family: Anton, sans-serif;
				text-align: center;
				font-size:60px;
				color: white;
				position: absolute;
 				top: 40%;
  				left: 40%;
			}

			#h2 {
				font-family: PT Sans Narrow, sans-serif;
				text-align: center;
				font-size:20px;
				color: white;
				position: absolute;
 				top: 60%;
  				left: 60%;
			}

			#byline{
				font-family: PT Sans Narrow, sans-serif;
				text-align: right;
				font-size:15px;
				color: white;
				position: absolute;
 				top: 65%;
  				left: 65%;
			}

			#p {
				font-family: Optima, sans-serif;
				float: left;
  				margin-left: 300px;
				margin-right: 280px;
				text-align: left;
				font-size: 15px;
			}

			#coverpage{
				width:100%;
			}

			#container{
				text-align: center;
				animation-duration: 2s;
			}
			
		</style>

<body>
	<div id="container" class="item animated fadeIn";>
		<img src="finalbg1.png" id="coverpage">
	<h1 id="h1">More Guns, More Violence?</h1>
	<h2 id="h2">Explore U.S. major mass shooting since 1982</h2>
	<p id="byline">By Ruobing Su</p>
	</div>
</body>

	<head>
		<script type="text/javascript" src="https://d3js.org/d3.v4.min.js"></script>
		<script src="https://unpkg.com/topojson@3"></script>
	</head>

	<body>
		<div align="center">
			<svg id="map" width="1200" height="800" align="center">
				<rect width=1200 height=800 fill="white" opacity="0" align="center"></rect>
			</svg>
		</div>

	</body>
	<div id="map">
	<script type="text/javascript">
		d3.queue()
			.defer(d3.json, "USA.json")
			.defer(d3.csv, "Massshooting.csv")
			.awaitAll(function(error,dataArray){
				var data = dataArray[0];
				var shooting = dataArray[1];
				console.log(dataArray);
			
			var geoJSON = topojson.feature(data,data.objects.states);
			
			var proj = d3.geoAlbersUsa()
				.fitSize([1200,800],geoJSON); 

			var path = d3.geoPath()
			.projection(proj); 

			var states = d3.select("#map").selectAll("path")
				.data(geoJSON.features);

			states.enter().append("path") //passing the path to svg and setting up the "d" value to draw a path 
				.attr("fill","gainsboro")
				.attr("stroke","white")
				.attr("stroke-width",1.5)
				.attr("d",function(feature){
					return path(feature);
				});

			//load my data into the file, make sure you create a new data array and variable accordingly
			var dots = d3.select("#map").selectAll("circle")
			.data(shooting);

			dots.enter().append("circle")
				.attr("transform",function(point){
					return "translate(" + proj([point.longitude,point.latitude]) + ")"
				})
				.attr("fill", function(point){
					if (point.Type == "Spree"){
						return "crimson";
					}
					else{
						return "black";
					}
				}) //if you want to use data in csv, make sure have point.before the column name 
				.attr("stroke-width",.5)
				.attr("opacity",.8)
				.attr("r", function(point){
					return point.Fatalities / 2;
				});


		});
	</script>
	</div>

	<p id="p">One strict definition used in the past by the federal government says at least four victims must be killed. Much broader criteria requires at least four victims be injured, though not necessarily killed. Other definitions land somewhere in the middle. The visualization below shows all the shooting incidents that fall in the criteria from 2016 to 2018.</p>


</html>
